# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ yt-dlp

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ yt-dlp —Å–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
--format 247 --output downloads/%(id)s.%(ext)s --no-playlist --no-check-certificates --max-filesize 2G --socket-timeout 60 --retries 5 --no-playlist --no-check-certificates --max-filesize 2G --socket-timeout 60 --retries 5 --format best[ext=mp4]/best
```

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ:
1. **–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å–∫–∞—á–∏–≤–∞–ª–∏—Å—å –∫–∞–∫ –æ–¥–∏–Ω —Ñ–∞–π–ª** - yt-dlp –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–≤—ã–π `--format` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π
2. **–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–∏–¥–µ–æ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** - –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å–∫–∞—á–∏–≤–∞–ª–∏—Å—å –≤ `best[ext=mp4]/best`
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫—ç—à–∞** - –∫—ç—à —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

## üîç **–ü—Ä–∏—á–∏–Ω–∞:**
–í `services/universal.go` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:

```go
// –°–¢–ê–†–´–ô –ö–û–î (—Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
args := us.platformDetector.GetYtDlpArgs(platformInfo.Type)  // –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–∫—Å–∏
downloadArgs := []string{...}                               // –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
proxyArgs := getProxyArgs()                                 // –ü—Ä–æ–∫—Å–∏ –µ—â–µ —Ä–∞–∑

allArgs := append(downloadArgs, args...)                    // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!
allArgs = append(allArgs, proxyArgs...)                    // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!
```

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

### 1. **–£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `DownloadVideoWithFormat`:**
```go
// –ù–û–í–´–ô –ö–û–î (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
downloadArgs := []string{
    "--format", formatID,
    "--output", filepath.Join(us.downloadDir, "%(id)s.%(ext)s"),
    "--no-playlist",
    "--no-check-certificates",
    "--max-filesize", "2G",
    "--socket-timeout", "60",
    "--retries", "5",
}

proxyArgs := getProxyArgs()

// –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
allArgs := append(downloadArgs, proxyArgs...)
allArgs = append(allArgs, url)
```

### 2. **–£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `GetVideoFormats`:**
```go
// –ù–û–í–´–ô –ö–û–î (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
formatArgs := []string{
    "--list-formats",
    "--no-playlist",
    "--no-check-certificates",
}

proxyArgs := getProxyArgs()

// –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
allArgs := append(formatArgs, proxyArgs...)
allArgs = append(allArgs, url)
```

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### ‚úÖ **–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- **–§–æ—Ä–º–∞—Ç 247** ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ `--format 247`
- **–§–æ—Ä–º–∞—Ç 242** ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ `--format 242`
- **–†–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Üí –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–π —Ñ–∞–π–ª
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫—ç—à** ‚Üí –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
1. **–£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ yt-dlp** - –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
3. **–ö—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–µ—Ç —Å–≤–æ–π —Ñ–∞–π–ª
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –±–æ—Ç –±—É–¥–µ—Ç:
1. ‚úÖ –°–∫–∞—á–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
2. ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
3. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
4. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–¥–µ–ª—å–Ω–æ

**–ú–∞–º–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!** üíö –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!
